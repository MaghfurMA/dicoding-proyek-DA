# -*- coding: utf-8 -*-
"""Proyek Analisis Data: Bike Sharing Dataset

Automatically generated by Colaboratory.

Original file is located at
    https://colab.research.google.com/drive/1VovoKZWxEPXwMv82DVJVSBBUvPsve7gL

- Nama: Moh. Alex Maghfur
- Email: mmaghfur.muhammad01@gmail.com
- Id Dicoding: mamaghfur

#Pendahuluan

Permasalahan yang akan dibahas di sini adalah:
1. Bagaimana perbandingan jumlah pengendara berdasarkan tipe dan berdasarkan hari dalam satu minggu?
2. Bagaimana hubungan antara suhu dengan jumlah pengendara?

#Persiapan

Menyiapkan semua library yang akan dibutuhkan
"""

import pandas as pd
import numpy as np
import matplotlib.pyplot as plt
import seaborn as sns

"""Load data yang sudah diunggah ke Google Drive pribadi"""

from google.colab import drive
drive.mount('/content/drive')

"""#Data Wrangling

##Gathering Data

Data yang diperoleh terbagi menjadi data per jam dan data per hari
"""

hour = pd.read_csv('/content/drive/MyDrive/Dicoding - Belajar Analisis Data dengan Python/hour.csv')
print(hour.shape)
hour.head()

day = pd.read_csv('/content/drive/MyDrive/Dicoding - Belajar Analisis Data dengan Python/day.csv')
print(day.shape)
day.head()

"""##Assessing Data"""

hour.describe()

day.describe()

"""Cek apakah terdapat missing values"""

hour.isna().sum()

day.isna().sum()

"""Cek apakah terdapat data duplikat"""

hour.duplicated().sum()

day.duplicated().sum()

"""##Data Cleaning

Pada tahap ini kolom yang memiliki label yang tidak sesuai akan dibenahi. Sebagai contoh kolom bulan dan season yang masih berupa angka akan dikembalikan ke nama bulan dan season sebenarnya
"""

hour['dteday'] = pd.to_datetime(hour['dteday'])
hour['mnth'] = hour['dteday'].dt.month_name()
hour.head()

def find_season(season):
    season_string = {1:'Winter', 2:'Spring', 3:'Summer', 4:'Fall'}
    return season_string.get(season)

season_list = []

for season in hour['season']:
    season = find_season(season)
    season_list.append(season)

hour['season'] = season_list
hour.head()

"""Selanjutnya, perbaiki kolom weekday dan year"""

hour['weekday'] = hour['dteday'].dt.day_name()
hour['yr'] = hour['dteday'].dt.year
hour.head()

"""Lakukan proses yang sama terhadap data per hari"""

day['dteday'] = pd.to_datetime(day['dteday'])
day['mnth'] = day['dteday'].dt.month_name()
day['weekday'] = day['dteday'].dt.day_name()
day['yr'] = day['dteday'].dt.year

def find_season(season):
    season_string = {1:'Winter', 2:'Spring', 3:'Summer', 4:'Fall'}
    return season_string.get(season)

season_list = []

for season in day['season']:
    season = find_season(season)
    season_list.append(season)

day['season'] = season_list
day.head()

"""#Analisis Data Eksploratif

##Membandingkan total pengendara casual vs registered
"""

plt.figure(figsize=(10,6))

sns.boxplot(data=day[['casual', 'registered']])

# Add labels and a title to the plot
plt.ylabel("Total Pengendara")
plt.title("Tipe Pengendara")

# Show the plot
plt.show()

"""Dari diagram di atas, tampak bahwa pengendara registered cenderung lebih banyak jika dibandingkan dengan pengendara casual

##Membandingkan total pengendara harian dalam satu minggu
"""

weekday_users = hour.groupby("weekday").agg({
    "casual": "sum",
    "registered": "sum",
    "cnt": "sum"
})

weekday_users = weekday_users.reset_index()

weekday_users

day_order = ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday']

plt.figure(figsize=(10,6))

sns.barplot(x='weekday', y='cnt', data=weekday_users, order=day_order, color='red')

plt.xlabel("Hari")
plt.ylabel("Total Pengendara")
plt.title("Total Pengendara dalam satu minggu")

plt.show()

"""Dari diagram di atas, tampak bahwa total pengendara dalam satu minggu cenderung stagnan, tidak ada peningkatan maupun penurunan yang signifikan

##Analisis korelasi antar variabel
"""

plt.figure(figsize=(17, 5))
sns.heatmap(hour.corr(numeric_only=True), annot=True)

"""Terdapat korelasi sedang antara variable hr, temp dan atemp terhadap jumlah pengendara (sekitar 0.4)

#Streamlit

#Penutup

Dari penjelasan di atas dapat disimpulkan bahwa:
1. Pengendara registered cenderung lebih banyak jika dibandingkan dengan pengendara casual, sedangkan total pengendara dalam satu minggu cenderung stagnan, tidak ada peningkatan maupun penurunan yang signifikan.
2. Terdapat korelasi sedang antara variable hr, temp dan atemp terhadap jumlah pengendara
"""